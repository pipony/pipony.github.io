<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Mysql导入导出 - 2MUCH-Tech-Notes</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Cindy.H" /><meta name="description" content="Mysql导入导出 导出 mysqldump (1) 导出完整数据： mysqldump -u用户名 -p 数据库名 &amp;gt; 数据库名.sql 例如：# /usr/local/mysql/bin/mysqldump -uroot -p abc &amp;gt; abc.sql (2) 只导出表结构（使用 -d 选项）： mysqldump -u用户" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.101.0 with theme even" />


<link rel="canonical" href="http://pipony.github.io/post/database/mysql%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Mysql导入导出" />
<meta property="og:description" content="Mysql导入导出 导出 mysqldump (1) 导出完整数据： mysqldump -u用户名 -p 数据库名 &gt; 数据库名.sql 例如：# /usr/local/mysql/bin/mysqldump -uroot -p abc &gt; abc.sql (2) 只导出表结构（使用 -d 选项）： mysqldump -u用户" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://pipony.github.io/post/database/mysql%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-11-27T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-11-27T00:00:00+00:00" />

<meta itemprop="name" content="Mysql导入导出">
<meta itemprop="description" content="Mysql导入导出 导出 mysqldump (1) 导出完整数据： mysqldump -u用户名 -p 数据库名 &gt; 数据库名.sql 例如：# /usr/local/mysql/bin/mysqldump -uroot -p abc &gt; abc.sql (2) 只导出表结构（使用 -d 选项）： mysqldump -u用户"><meta itemprop="datePublished" content="2022-11-27T00:00:00+00:00" />
<meta itemprop="dateModified" content="2022-11-27T00:00:00+00:00" />
<meta itemprop="wordCount" content="1257">
<meta itemprop="keywords" content="数据库," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Mysql导入导出"/>
<meta name="twitter:description" content="Mysql导入导出 导出 mysqldump (1) 导出完整数据： mysqldump -u用户名 -p 数据库名 &gt; 数据库名.sql 例如：# /usr/local/mysql/bin/mysqldump -uroot -p abc &gt; abc.sql (2) 只导出表结构（使用 -d 选项）： mysqldump -u用户"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">2MUCH</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/post/about">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">2MUCH</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/about">About</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Mysql导入导出</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-11-27 </span>
        <div class="post-category">
            <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"> 数据库 </a>
            </div>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#mysql导入导出">Mysql导入导出</a>
      <ul>
        <li><a href="#导出">导出</a></li>
        <li><a href="#导入">导入</a></li>
        <li><a href="#shell脚本实现导入导出">shell脚本实现导入导出</a></li>
        <li><a href="#如何使用导入定长文件fixed-width-records-">如何使用导入定长文件（fixed-width records ）</a></li>
        <li><a href="#参考链接">参考链接</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h1 id="mysql导入导出">Mysql导入导出</h1>
<h2 id="导出">导出</h2>
<ol>
<li>mysqldump</li>
</ol>
<p>(1) 导出完整数据：</p>
<p><code>mysqldump -u用户名 -p 数据库名 &gt; 数据库名.sql</code></p>
<p>例如：<code># /usr/local/mysql/bin/mysqldump -uroot -p abc &gt; abc.sql</code></p>
<p>(2) 只导出表结构（使用<code> -d</code> 选项）：</p>
<p><code>mysqldump -u用户名 -p -d 数据库名 &gt; 数据库名.sql</code></p>
<ol start="2">
<li>INTO OUTFILE</li>
</ol>
<p><a href="https://www.modb.pro/db/98539">https://www.modb.pro/db/98539</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">data_tbl</span><span class="w"> </span><span class="o">--</span><span class="err">查找数据源，如果是全表所有字段也可以用</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="o">&lt;</span><span class="n">talbe</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">INTO</span><span class="w"> </span><span class="k">OUTFILE</span><span class="w"> </span><span class="s2">&#34;/tmp/data.txt&#34;</span><span class="w"> </span><span class="o">--</span><span class="err">数据输出文件</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">FIELDS</span><span class="w"> </span><span class="k">TERMINATED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="s1">&#39;,&#39;</span><span class="w">  </span><span class="o">--</span><span class="err">字段分隔符</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">OPTIONALLY</span><span class="w"> </span><span class="k">ENCLOSED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="s1">&#39;&#34;&#39;</span><span class="w"> </span><span class="o">--</span><span class="err">字段引用符</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">LINES</span><span class="w"> </span><span class="k">TERMINATED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="s1">&#39;\n&#39;</span><span class="w"> </span><span class="o">--</span><span class="err">整条记录分割符</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="导入">导入</h2>
<ol>
<li>&lt;.sql</li>
</ol>
<p><code>mysql -u用户名 -p 数据库名 &lt; 数据库名.sql</code></p>
<p>例如：</p>
<p><code># mysql -uroot -p123456 &lt; abc.sql</code></p>
<ol start="2">
<li>source</li>
</ol>
<p>(1) 连接数据库：<code>mysql -u {用户名} -p</code> 回车 再输入<strong>密码</strong> <code>mysql -u root -p</code> 回车</p>
<p>(2) 指定目标数据库名：<code>use {库名}</code> <code>use eva</code> 回车</p>
<p>(3) 导入文件 <code>source {路径}</code> <code>source C:\Users\chengh\Desktop\user.sql</code> 需要注意的是 你得<strong>有这个文件</strong>，如果没有则会报<em>异常</em></p>
<ol start="3">
<li>load data</li>
</ol>
<p>使用场景和语法参见：https://blog.csdn.net/u012815136/article/details/88953289</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">load</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="k">infile</span><span class="w"> </span><span class="s1">&#39;D:/my_user_info.txt&#39;</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">user_info</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">CHARACTER</span><span class="w"> </span><span class="kt">SET</span><span class="w"> </span><span class="n">utf8</span><span class="w"> </span><span class="c1">-- 可选，指定导入文件的编码，避免中文乱码问题。假如这里文件 my_user_info.txt 的编码为 gbk，那么这里编码就应该设为 gbk 了
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">FIELDS</span><span class="w"> </span><span class="k">TERMINATED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="s1">&#39;||&#39;</span><span class="w"> </span><span class="c1">-- 字段分隔符，每个字段(列)以什么字符分隔，默认是 \t
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">	</span><span class="k">OPTIONALLY</span><span class="w"> </span><span class="k">ENCLOSED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="c1">-- 文本限定符，每个字段被什么字符包围，默认是空字符
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">	</span><span class="k">ESCAPED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="s1">&#39;\\&#39;</span><span class="w"> </span><span class="c1">-- 转义符，默认是 \
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">LINES</span><span class="w"> </span><span class="k">TERMINATED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="s1">&#39;\n&#39;</span><span class="w"> </span><span class="c1">-- 记录分隔符，如字段本身也含\n，那么应先去除，否则load data 会误将其视作另一行记录进行导入
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="p">,</span><span class="w"> </span><span class="n">address</span><span class="p">,</span><span class="w"> </span><span class="n">create_date</span><span class="p">)</span><span class="w"> </span><span class="c1">-- 每一行文本按顺序对应的表字段，建议不要省略
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>注意事项：</p>
<p><code>LOAD DATA INFILE</code>和 <code>SELECT INTO OUTFILE</code>是相互依赖的，即：如果你导出方式使用了 <code>SELECT INTO OUTFILE</code>，那么导入的时候就需要使用 <code>LOAD DATA INFILE</code>进行导入。<strong>需要格外注意，该方式会锁全表</strong>。</p>
<p><strong>LOAD DATA格式</strong></p>
<p><a href="https://dev.mysql.com/doc/refman/8.0/en/load-data.html">https://dev.mysql.com/doc/refman/8.0/en/load-data.html</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">LOAD</span><span class="w"> </span><span class="k">DATA</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">[</span><span class="n">LOW_PRIORITY</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">CONCURRENT</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="k">LOCAL</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">INFILE</span><span class="w"> </span><span class="s1">&#39;file_name&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">[</span><span class="k">REPLACE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">IGNORE</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">INTO</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">tbl_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">[</span><span class="n">PARTITION</span><span class="w"> </span><span class="p">(</span><span class="n">partition_name</span><span class="w"> </span><span class="p">[,</span><span class="w"> </span><span class="n">partition_name</span><span class="p">]</span><span class="w"> </span><span class="p">...)]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">[</span><span class="nb">CHARACTER</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">charset_name</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">[</span><span class="err">{</span><span class="n">FIELDS</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">COLUMNS</span><span class="err">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">[</span><span class="n">TERMINATED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">[[</span><span class="n">OPTIONALLY</span><span class="p">]</span><span class="w"> </span><span class="n">ENCLOSED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="s1">&#39;char&#39;</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">[</span><span class="n">ESCAPED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="s1">&#39;char&#39;</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">[</span><span class="n">LINES</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">[</span><span class="n">STARTING</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">[</span><span class="n">TERMINATED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">[</span><span class="k">IGNORE</span><span class="w"> </span><span class="nb">number</span><span class="w"> </span><span class="err">{</span><span class="n">LINES</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">ROWS</span><span class="err">}</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">[(</span><span class="n">col_name_or_user_var</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">[,</span><span class="w"> </span><span class="n">col_name_or_user_var</span><span class="p">]</span><span class="w"> </span><span class="p">...)]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">[</span><span class="k">SET</span><span class="w"> </span><span class="n">col_name</span><span class="o">=</span><span class="err">{</span><span class="n">expr</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">DEFAULT</span><span class="err">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">[,</span><span class="w"> </span><span class="n">col_name</span><span class="o">=</span><span class="err">{</span><span class="n">expr</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">DEFAULT</span><span class="err">}</span><span class="p">]</span><span class="w"> </span><span class="p">...]</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="shell脚本实现导入导出">shell脚本实现导入导出</h2>
<ol>
<li><code>select into outfile</code> &amp; <code>load data infile</code></li>
</ol>
<p><a href="https://blog.csdn.net/u013946356/article/details/84960273">https://blog.csdn.net/u013946356/article/details/84960273</a></p>
<h2 id="如何使用导入定长文件fixed-width-records-">如何使用导入定长文件（fixed-width records ）</h2>
<p>定长文件：不同于用分隔符（如逗号或空格）来分割每行记录的各字段，定长数据文件是根据约定好的各字段长度来组织数据文件的。如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="w"> </span><span class="n">slideNum</span><span class="p">,</span><span class="w"> </span><span class="n">startTime</span><span class="p">,</span><span class="w"> </span><span class="n">endTime</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="mi">1</span><span class="w">     </span><span class="mi">75175</span><span class="p">.</span><span class="mi">18</span><span class="w">     </span><span class="mi">95128</span><span class="p">.</span><span class="mi">46</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="mi">1</span><span class="w">    </span><span class="mi">790890</span><span class="p">.</span><span class="mi">89</span><span class="w">    </span><span class="mi">795829</span><span class="p">.</span><span class="mi">16</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="mi">1</span><span class="w">    </span><span class="mi">875975</span><span class="p">.</span><span class="mi">98</span><span class="w">    </span><span class="mi">880914</span><span class="p">.</span><span class="mi">25</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="mi">8</span><span class="w">   </span><span class="mi">2137704</span><span class="p">.</span><span class="mi">37</span><span class="w">   </span><span class="mi">2162195</span><span class="p">.</span><span class="mi">53</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="mi">8</span><span class="w">   </span><span class="mi">2167267</span><span class="p">.</span><span class="mi">27</span><span class="w">   </span><span class="mi">2375275</span><span class="p">.</span><span class="mi">28</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="mi">10</span><span class="w">   </span><span class="mi">2375408</span><span class="p">.</span><span class="mi">74</span><span class="w">   </span><span class="mi">2763997</span><span class="p">.</span><span class="mi">33</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="mi">14</span><span class="w">   </span><span class="mi">2764264</span><span class="p">.</span><span class="mi">26</span><span class="w">   </span><span class="mi">2804437</span><span class="p">.</span><span class="mi">77</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="mi">15</span><span class="w">   </span><span class="mi">2804504</span><span class="p">.</span><span class="mi">50</span><span class="w">   </span><span class="mi">2881981</span><span class="p">.</span><span class="mi">98</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="mi">16</span><span class="w">   </span><span class="mi">2882048</span><span class="p">.</span><span class="mi">72</span><span class="w">   </span><span class="mi">2887921</span><span class="p">.</span><span class="mi">25</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="mi">16</span><span class="w">   </span><span class="mi">2993093</span><span class="p">.</span><span class="mi">09</span><span class="w">   </span><span class="mi">2998031</span><span class="p">.</span><span class="mi">36</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="mi">19</span><span class="w">   </span><span class="mi">3004104</span><span class="p">.</span><span class="mi">10</span><span class="w">   </span><span class="mi">3008041</span><span class="p">.</span><span class="mi">37</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><code>LOAD DATA</code>虽然很好地支持了分隔符格式的数据文件导入，但是这类型的数据文件，需要进行特殊的处理。</p>
<p>可参考：https://stackoverflow.com/questions/11461790/loading-fixed-width-space-delimited-txt-file-into-mysql</p>
<p>针对上面的例子，解决方案可以是（with user variables (<code>@row</code>)）：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">LOAD</span><span class="w"> </span><span class="k">DATA</span><span class="w"> </span><span class="k">LOCAL</span><span class="w"> </span><span class="n">INFILE</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="s1">&#39;/some/Path/segmentation.txt&#39;</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">INTO</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">clip</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">(</span><span class="o">@</span><span class="k">row</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SET</span><span class="w"> </span><span class="n">slideNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">TRIM</span><span class="p">(</span><span class="n">SUBSTR</span><span class="p">(</span><span class="o">@</span><span class="k">row</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">)),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">startTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">TRIM</span><span class="p">(</span><span class="n">SUBSTR</span><span class="p">(</span><span class="o">@</span><span class="k">row</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">13</span><span class="p">)),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">endTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">TRIM</span><span class="p">(</span><span class="n">SUBSTR</span><span class="p">(</span><span class="o">@</span><span class="k">row</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="mi">13</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>使用<code>LOAD DATA</code>来处理定长文件的注意事项：</p>
<ul>
<li>Fixed-size format does not work if you are using a <strong>multibyte character set</strong>.</li>
<li>With fixed-row format (which is used when FIELDS TERMINATED BY and FIELDS ENCLOSED BY are both empty), NULL is written as an empty string. <strong>This causes both NULL values and empty strings in the table to be indistinguishable</strong> when written to the file because both are written as empty strings. If you need to be able to tell the two apart when reading the file back in, you should not use fixed-row format.</li>
</ul>
<p>此类场景的解决方案，参考链接：</p>
<p><a href="https://stackoverflow.com/questions/11461790/loading-fixed-width-space-delimited-txt-file-into-mysql">https://stackoverflow.com/questions/11461790/loading-fixed-width-space-delimited-txt-file-into-mysql</a></p>
<p><a href="https://docs.singlestore.com/managed-service/en/reference/sql-reference/data-manipulation-language-dml/load-data.html">https://docs.singlestore.com/managed-service/en/reference/sql-reference/data-manipulation-language-dml/load-data.html</a></p>
<p><a href="https://dev.mysql.com/doc/refman/8.0/en/load-data.html">https://dev.mysql.com/doc/refman/8.0/en/load-data.html</a></p>
<h2 id="参考链接">参考链接</h2>
<p><a href="https://www.runoob.com/w3cnote/linux-mysql-import-export-data.html">https://www.runoob.com/w3cnote/linux-mysql-import-export-data.html</a></p>
<p><a href="https://juejin.cn/post/6992489420188286983">https://juejin.cn/post/6992489420188286983</a></p>
<p><a href="https://juejin.cn/post/7039542872051302436">https://juejin.cn/post/7039542872051302436</a></p>
<p><a href="https://www.modb.pro/db/98539">https://www.modb.pro/db/98539</a></p>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">Cindy.H</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
        2022-11-27
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
          </div>
      <nav class="post-nav">
        
        <a class="next" href="/post/linux/linux-%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/">
            <span class="next-text nav-default">Linux-磁盘管理</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="http://pipony.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2017 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span>Cindy.H</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js"></script>








</body>
</html>
