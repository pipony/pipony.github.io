<!DOCTYPE html>






























<html
  class="not-ready text-sm lg:text-base"
  style="--bg: #faf6f1"
  lang="en-us"
>
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no"
  />

  
  <title>Mysql导入导出 - </title>

  
  <meta name="theme-color" />
  
  <meta name="description" content="Mysql导入导出 导出 mysqldump (1) 导出完整数据：
mysqldump -u用户名 -p 数据库名 &gt; 数据库名.sql
例如：# /usr/local/mysql/bin/mysqldump -uroot -p abc &gt; abc.sql
(2) 只导出表结构（使用 -d 选项）：
mysqldump -u用户名 -p -d 数据库名 &gt; 数据库名.sql
INTO OUTFILE https://www.modb.pro/db/98539
SELECT * FROM data_tbl --查找数据源，如果是全表所有字段也可以用 TABLE &lt;talbe&gt; INTO OUTFILE &#34;/tmp/data.txt&#34; --数据输出文件 FIELDS TERMINATED BY &#39;,&#39; --字段分隔符 OPTIONALLY ENCLOSED BY &#39;&#34;&#39; --字段引用符 LINES TERMINATED BY &#39;\n&#39; --整条记录分割符 ; 导入 &lt;.sql mysql -u用户名 -p 数据库名 &lt; 数据库名.sql
例如：
# mysql -uroot -p123456 &lt; abc." />
  <meta
    name="author"
    content="Cindy.H"
  />
  

  
  
  
  
  
  
  <link rel="preload stylesheet" as="style" href="https://huangxindi.com/main.min.css" />

  

  
     
  <link rel="preload" as="image" href="https://huangxindi.com/theme.png" />

  
  
  
  

  
  <link rel="preload" as="image" href="https://huangxindi.com/github.svg" />
  
  <link rel="preload" as="image" href="https://huangxindi.com/rss.svg" />
  

  
  <link rel="icon" href="https://huangxindi.com/favicon.ico" />
  <link rel="apple-touch-icon" href="https://huangxindi.com/apple-touch-icon.png" />

  
  <meta name="generator" content="Hugo 0.101.0" />

  
  

  
  
  
  
  
  
  
  
  
  <meta property="og:title" content="Mysql导入导出" />
<meta property="og:description" content="Mysql导入导出 导出 mysqldump (1) 导出完整数据：
mysqldump -u用户名 -p 数据库名 &gt; 数据库名.sql
例如：# /usr/local/mysql/bin/mysqldump -uroot -p abc &gt; abc.sql
(2) 只导出表结构（使用 -d 选项）：
mysqldump -u用户名 -p -d 数据库名 &gt; 数据库名.sql
INTO OUTFILE https://www.modb.pro/db/98539
SELECT * FROM data_tbl --查找数据源，如果是全表所有字段也可以用 TABLE &lt;talbe&gt; INTO OUTFILE &#34;/tmp/data.txt&#34; --数据输出文件 FIELDS TERMINATED BY &#39;,&#39; --字段分隔符 OPTIONALLY ENCLOSED BY &#39;&#34;&#39; --字段引用符 LINES TERMINATED BY &#39;\n&#39; --整条记录分割符 ; 导入 &lt;.sql mysql -u用户名 -p 数据库名 &lt; 数据库名.sql
例如：
# mysql -uroot -p123456 &lt; abc." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://huangxindi.com/post/workspace/01-tech/database/mysql%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-11-27T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-11-27T00:00:00+00:00" />


  
  <meta itemprop="name" content="Mysql导入导出">
<meta itemprop="description" content="Mysql导入导出 导出 mysqldump (1) 导出完整数据：
mysqldump -u用户名 -p 数据库名 &gt; 数据库名.sql
例如：# /usr/local/mysql/bin/mysqldump -uroot -p abc &gt; abc.sql
(2) 只导出表结构（使用 -d 选项）：
mysqldump -u用户名 -p -d 数据库名 &gt; 数据库名.sql
INTO OUTFILE https://www.modb.pro/db/98539
SELECT * FROM data_tbl --查找数据源，如果是全表所有字段也可以用 TABLE &lt;talbe&gt; INTO OUTFILE &#34;/tmp/data.txt&#34; --数据输出文件 FIELDS TERMINATED BY &#39;,&#39; --字段分隔符 OPTIONALLY ENCLOSED BY &#39;&#34;&#39; --字段引用符 LINES TERMINATED BY &#39;\n&#39; --整条记录分割符 ; 导入 &lt;.sql mysql -u用户名 -p 数据库名 &lt; 数据库名.sql
例如：
# mysql -uroot -p123456 &lt; abc."><meta itemprop="datePublished" content="2022-11-27T00:00:00+00:00" />
<meta itemprop="dateModified" content="2022-11-27T00:00:00+00:00" />
<meta itemprop="wordCount" content="884">
<meta itemprop="keywords" content="数据库," />
  
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Mysql导入导出"/>
<meta name="twitter:description" content="Mysql导入导出 导出 mysqldump (1) 导出完整数据：
mysqldump -u用户名 -p 数据库名 &gt; 数据库名.sql
例如：# /usr/local/mysql/bin/mysqldump -uroot -p abc &gt; abc.sql
(2) 只导出表结构（使用 -d 选项）：
mysqldump -u用户名 -p -d 数据库名 &gt; 数据库名.sql
INTO OUTFILE https://www.modb.pro/db/98539
SELECT * FROM data_tbl --查找数据源，如果是全表所有字段也可以用 TABLE &lt;talbe&gt; INTO OUTFILE &#34;/tmp/data.txt&#34; --数据输出文件 FIELDS TERMINATED BY &#39;,&#39; --字段分隔符 OPTIONALLY ENCLOSED BY &#39;&#34;&#39; --字段引用符 LINES TERMINATED BY &#39;\n&#39; --整条记录分割符 ; 导入 &lt;.sql mysql -u用户名 -p 数据库名 &lt; 数据库名.sql
例如：
# mysql -uroot -p123456 &lt; abc."/>

  
  
</head>

  <body class="text-black duration-200 ease-out dark:text-white">
    <header class="mx-auto flex h-[5rem] max-w-3xl px-8 lg:justify-center">
  <div class="relative z-50 mr-auto flex items-center">
    <a
      class="-translate-x-[1px] -translate-y-0.5 text-3xl font-bold"
      href="https://huangxindi.com/"
      ></a
    >
    <a
      class="btn-dark ml-6 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.svg)_left_center/cover_no-repeat] dark:invert dark:[background-position:right]"
    ></a>
  </div>

  <a
    class="btn-menu relative z-50 -mr-8 flex h-[5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden"
  ></a>

  
  <script>
    
    const htmlClass = document.documentElement.classList;
    setTimeout(() => {
      htmlClass.remove('not-ready');
    }, 10);

    
    const btnMenu = document.querySelector('.btn-menu');
    btnMenu.addEventListener('click', () => {
      htmlClass.toggle('open');
    });

    
    const metaTheme = document.querySelector('meta[name="theme-color"]');
    const lightBg = `"#faf6f1"`.replace(/"/g, '');
    const setDark = (isDark) => {
      metaTheme.setAttribute('content', isDark ? '#000' : lightBg);
      htmlClass[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark);
    };

    
    const darkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    if (htmlClass.contains('dark')) {
      setDark(true);
    } else {
      const darkVal = localStorage.getItem('dark');
      setDark(darkVal ? darkVal === 'true' : darkScheme.matches);
    }

    
    darkScheme.addEventListener('change', (event) => {
      setDark(event.matches);
    });

    
    const btnDark = document.querySelector('.btn-dark');
    btnDark.addEventListener('click', () => {
      setDark(localStorage.getItem('dark') !== 'true');
    });
  </script>

  <div
    class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"
  >
    
    
    <nav class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-6">
      
      <a
        class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal"
        href="/"
        >Home</a
      >
      
      <a
        class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal"
        href="/post"
        >Archives</a
      >
      
      <a
        class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal"
        href=""
        >Tags</a
      >
      
      <a
        class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal"
        href="/categories"
        >Categories</a
      >
      
      <a
        class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal"
        href="/post/about"
        >About</a
      >
      
    </nav>
    

    
    <nav
      class="mt-12 flex justify-center space-x-10 dark:invert lg:mt-0 lg:ml-12 lg:items-center lg:space-x-6"
    >
      
      <a
        class="h-8 w-8 [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./github.svg)"
        href="https://github.com/https://github.com/pipony"
        target="_blank"
        rel="me"
      ></a>
      
      <a
        class="h-8 w-8 [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./rss.svg)"
        href="https://huangxindi.com/index.xml"
        target="_blank"
        
      ></a>
      
    </nav>
    
  </div>
</header>


    <main
      class="prose prose-neutral relative mx-auto min-h-[calc(100%-10rem)] max-w-3xl px-8 pt-20 pb-32 dark:prose-invert"
    >
      

<article>
  <header class="mb-20">
    <h1 class="!my-0 pb-2.5">Mysql导入导出</h1>

    
    <div class="text-sm opacity-60">
      
      <time>Nov 27, 2022</time>
      
      
      <span class="mx-1">&middot;</span>
      <span>Cindy.H</span>
      
    </div>
    
  </header>

  <section><h1 id="mysql导入导出">Mysql导入导出</h1>
<h2 id="导出">导出</h2>
<ol>
<li>mysqldump</li>
</ol>
<p>(1) 导出完整数据：</p>
<p><code>mysqldump -u用户名 -p 数据库名 &gt; 数据库名.sql</code></p>
<p>例如：<code># /usr/local/mysql/bin/mysqldump -uroot -p abc &gt; abc.sql</code></p>
<p>(2) 只导出表结构（使用<code> -d</code> 选项）：</p>
<p><code>mysqldump -u用户名 -p -d 数据库名 &gt; 数据库名.sql</code></p>
<ol start="2">
<li>INTO OUTFILE</li>
</ol>
<p><a href="https://www.modb.pro/db/98539">https://www.modb.pro/db/98539</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-mysql" data-lang="mysql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> data_tbl <span style="color:#f92672">--</span><span style="color:#960050;background-color:#1e0010">查找数据源，如果是全表所有字段也可以用</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#f92672">&lt;</span>talbe<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INTO</span> <span style="color:#66d9ef">OUTFILE</span> <span style="color:#e6db74">&#34;/tmp/data.txt&#34;</span> <span style="color:#f92672">--</span><span style="color:#960050;background-color:#1e0010">数据输出文件</span>
</span></span><span style="display:flex;"><span>FIELDS <span style="color:#66d9ef">TERMINATED</span> <span style="color:#66d9ef">BY</span> <span style="color:#e6db74">&#39;,&#39;</span>  <span style="color:#f92672">--</span><span style="color:#960050;background-color:#1e0010">字段分隔符</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">OPTIONALLY</span> <span style="color:#66d9ef">ENCLOSED</span> <span style="color:#66d9ef">BY</span> <span style="color:#e6db74">&#39;&#34;&#39;</span> <span style="color:#f92672">--</span><span style="color:#960050;background-color:#1e0010">字段引用符</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">LINES</span> <span style="color:#66d9ef">TERMINATED</span> <span style="color:#66d9ef">BY</span> <span style="color:#e6db74">&#39;\n&#39;</span> <span style="color:#f92672">--</span><span style="color:#960050;background-color:#1e0010">整条记录分割符</span>
</span></span><span style="display:flex;"><span>;
</span></span></code></pre></div><h2 id="导入">导入</h2>
<ol>
<li>&lt;.sql</li>
</ol>
<p><code>mysql -u用户名 -p 数据库名 &lt; 数据库名.sql</code></p>
<p>例如：</p>
<p><code># mysql -uroot -p123456 &lt; abc.sql</code></p>
<ol start="2">
<li>source</li>
</ol>
<p>(1) 连接数据库：<code>mysql -u {用户名} -p</code> 回车 再输入<strong>密码</strong> <code>mysql -u root -p</code> 回车</p>
<p>(2) 指定目标数据库名：<code>use {库名}</code> <code>use eva</code> 回车</p>
<p>(3) 导入文件 <code>source {路径}</code> <code>source C:\Users\chengh\Desktop\user.sql</code> 需要注意的是 你得<strong>有这个文件</strong>，如果没有则会报<em>异常</em></p>
<ol start="3">
<li>load data</li>
</ol>
<p>使用场景和语法参见：https://blog.csdn.net/u012815136/article/details/88953289</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-mysql" data-lang="mysql"><span style="display:flex;"><span><span style="color:#66d9ef">load</span> data local <span style="color:#66d9ef">infile</span> <span style="color:#e6db74">&#39;D:/my_user_info.txt&#39;</span> <span style="color:#66d9ef">into</span> <span style="color:#66d9ef">table</span> user_info
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">CHARACTER</span> <span style="color:#66d9ef">SET</span> utf8 <span style="color:#75715e">-- 可选，指定导入文件的编码，避免中文乱码问题。假如这里文件 my_user_info.txt 的编码为 gbk，那么这里编码就应该设为 gbk 了
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>FIELDS <span style="color:#66d9ef">TERMINATED</span> <span style="color:#66d9ef">BY</span> <span style="color:#e6db74">&#39;||&#39;</span> <span style="color:#75715e">-- 字段分隔符，每个字段(列)以什么字符分隔，默认是 \t
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">OPTIONALLY</span> <span style="color:#66d9ef">ENCLOSED</span> <span style="color:#66d9ef">BY</span> <span style="color:#e6db74">&#39;&#39;</span> <span style="color:#75715e">-- 文本限定符，每个字段被什么字符包围，默认是空字符
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">ESCAPED</span> <span style="color:#66d9ef">BY</span> <span style="color:#e6db74">&#39;\\&#39;</span> <span style="color:#75715e">-- 转义符，默认是 \
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">LINES</span> <span style="color:#66d9ef">TERMINATED</span> <span style="color:#66d9ef">BY</span> <span style="color:#e6db74">&#39;\n&#39;</span> <span style="color:#75715e">-- 记录分隔符，如字段本身也含\n，那么应先去除，否则load data 会误将其视作另一行记录进行导入
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>(id, name, age, address, create_date) <span style="color:#75715e">-- 每一行文本按顺序对应的表字段，建议不要省略
</span></span></span></code></pre></div><p>注意事项：</p>
<p><code>LOAD DATA INFILE</code>和 <code>SELECT INTO OUTFILE</code>是相互依赖的，即：如果你导出方式使用了 <code>SELECT INTO OUTFILE</code>，那么导入的时候就需要使用 <code>LOAD DATA INFILE</code>进行导入。<strong>需要格外注意，该方式会锁全表</strong>。</p>
<p><strong>LOAD DATA格式</strong></p>
<p><a href="https://dev.mysql.com/doc/refman/8.0/en/load-data.html">https://dev.mysql.com/doc/refman/8.0/en/load-data.html</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">LOAD</span> <span style="color:#66d9ef">DATA</span>
</span></span><span style="display:flex;"><span>    [LOW_PRIORITY <span style="color:#f92672">|</span> CONCURRENT] [<span style="color:#66d9ef">LOCAL</span>]
</span></span><span style="display:flex;"><span>    INFILE <span style="color:#e6db74">&#39;file_name&#39;</span>
</span></span><span style="display:flex;"><span>    [<span style="color:#66d9ef">REPLACE</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">IGNORE</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">INTO</span> <span style="color:#66d9ef">TABLE</span> tbl_name
</span></span><span style="display:flex;"><span>    [PARTITION (partition_name [, partition_name] ...)]
</span></span><span style="display:flex;"><span>    [CHARACTER <span style="color:#66d9ef">SET</span> charset_name]
</span></span><span style="display:flex;"><span>    [<span style="color:#960050;background-color:#1e0010">{</span>FIELDS <span style="color:#f92672">|</span> COLUMNS<span style="color:#960050;background-color:#1e0010">}</span>
</span></span><span style="display:flex;"><span>        [TERMINATED <span style="color:#66d9ef">BY</span> <span style="color:#e6db74">&#39;string&#39;</span>]
</span></span><span style="display:flex;"><span>        [[OPTIONALLY] ENCLOSED <span style="color:#66d9ef">BY</span> <span style="color:#e6db74">&#39;char&#39;</span>]
</span></span><span style="display:flex;"><span>        [ESCAPED <span style="color:#66d9ef">BY</span> <span style="color:#e6db74">&#39;char&#39;</span>]
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>    [LINES
</span></span><span style="display:flex;"><span>        [STARTING <span style="color:#66d9ef">BY</span> <span style="color:#e6db74">&#39;string&#39;</span>]
</span></span><span style="display:flex;"><span>        [TERMINATED <span style="color:#66d9ef">BY</span> <span style="color:#e6db74">&#39;string&#39;</span>]
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>    [<span style="color:#66d9ef">IGNORE</span> number <span style="color:#960050;background-color:#1e0010">{</span>LINES <span style="color:#f92672">|</span> <span style="color:#66d9ef">ROWS</span><span style="color:#960050;background-color:#1e0010">}</span>]
</span></span><span style="display:flex;"><span>    [(col_name_or_user_var
</span></span><span style="display:flex;"><span>        [, col_name_or_user_var] ...)]
</span></span><span style="display:flex;"><span>    [<span style="color:#66d9ef">SET</span> col_name<span style="color:#f92672">=</span><span style="color:#960050;background-color:#1e0010">{</span>expr <span style="color:#f92672">|</span> <span style="color:#66d9ef">DEFAULT</span><span style="color:#960050;background-color:#1e0010">}</span>
</span></span><span style="display:flex;"><span>        [, col_name<span style="color:#f92672">=</span><span style="color:#960050;background-color:#1e0010">{</span>expr <span style="color:#f92672">|</span> <span style="color:#66d9ef">DEFAULT</span><span style="color:#960050;background-color:#1e0010">}</span>] ...]
</span></span></code></pre></div><h2 id="shell脚本实现导入导出">shell脚本实现导入导出</h2>
<ol>
<li><code>select into outfile</code> &amp; <code>load data infile</code></li>
</ol>
<p><a href="https://blog.csdn.net/u013946356/article/details/84960273">https://blog.csdn.net/u013946356/article/details/84960273</a></p>
<h2 id="如何使用导入定长文件fixed-width-records-">如何使用导入定长文件（fixed-width records ）</h2>
<p>定长文件：不同于用分隔符（如逗号或空格）来分割每行记录的各字段，定长数据文件是根据约定好的各字段长度来组织数据文件的。如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span> slideNum, startTime, endTime
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">1</span>     <span style="color:#ae81ff">75175</span>.<span style="color:#ae81ff">18</span>     <span style="color:#ae81ff">95128</span>.<span style="color:#ae81ff">46</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">1</span>    <span style="color:#ae81ff">790890</span>.<span style="color:#ae81ff">89</span>    <span style="color:#ae81ff">795829</span>.<span style="color:#ae81ff">16</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">1</span>    <span style="color:#ae81ff">875975</span>.<span style="color:#ae81ff">98</span>    <span style="color:#ae81ff">880914</span>.<span style="color:#ae81ff">25</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">8</span>   <span style="color:#ae81ff">2137704</span>.<span style="color:#ae81ff">37</span>   <span style="color:#ae81ff">2162195</span>.<span style="color:#ae81ff">53</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">8</span>   <span style="color:#ae81ff">2167267</span>.<span style="color:#ae81ff">27</span>   <span style="color:#ae81ff">2375275</span>.<span style="color:#ae81ff">28</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">10</span>   <span style="color:#ae81ff">2375408</span>.<span style="color:#ae81ff">74</span>   <span style="color:#ae81ff">2763997</span>.<span style="color:#ae81ff">33</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">14</span>   <span style="color:#ae81ff">2764264</span>.<span style="color:#ae81ff">26</span>   <span style="color:#ae81ff">2804437</span>.<span style="color:#ae81ff">77</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">15</span>   <span style="color:#ae81ff">2804504</span>.<span style="color:#ae81ff">50</span>   <span style="color:#ae81ff">2881981</span>.<span style="color:#ae81ff">98</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">16</span>   <span style="color:#ae81ff">2882048</span>.<span style="color:#ae81ff">72</span>   <span style="color:#ae81ff">2887921</span>.<span style="color:#ae81ff">25</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">16</span>   <span style="color:#ae81ff">2993093</span>.<span style="color:#ae81ff">09</span>   <span style="color:#ae81ff">2998031</span>.<span style="color:#ae81ff">36</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">19</span>   <span style="color:#ae81ff">3004104</span>.<span style="color:#ae81ff">10</span>   <span style="color:#ae81ff">3008041</span>.<span style="color:#ae81ff">37</span>
</span></span></code></pre></div><p><code>LOAD DATA</code>虽然很好地支持了分隔符格式的数据文件导入，但是这类型的数据文件，需要进行特殊的处理。</p>
<p>可参考：https://stackoverflow.com/questions/11461790/loading-fixed-width-space-delimited-txt-file-into-mysql</p>
<p>针对上面的例子，解决方案可以是（with user variables (<code>@row</code>)）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">LOAD</span> <span style="color:#66d9ef">DATA</span> <span style="color:#66d9ef">LOCAL</span> INFILE 
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;/some/Path/segmentation.txt&#39;</span> 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INTO</span> <span style="color:#66d9ef">TABLE</span> clip
</span></span><span style="display:flex;"><span>(<span style="color:#f92672">@</span><span style="color:#66d9ef">row</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SET</span> slideNum <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRIM</span>(SUBSTR(<span style="color:#f92672">@</span><span style="color:#66d9ef">row</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">4</span>)),
</span></span><span style="display:flex;"><span>    startTime <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRIM</span>(SUBSTR(<span style="color:#f92672">@</span><span style="color:#66d9ef">row</span>,<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">13</span>)),
</span></span><span style="display:flex;"><span>    endTime <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRIM</span>(SUBSTR(<span style="color:#f92672">@</span><span style="color:#66d9ef">row</span>,<span style="color:#ae81ff">18</span>,<span style="color:#ae81ff">13</span>))
</span></span><span style="display:flex;"><span>;
</span></span></code></pre></div><p>使用<code>LOAD DATA</code>来处理定长文件的注意事项：</p>
<ul>
<li>Fixed-size format does not work if you are using a <strong>multibyte character set</strong>.</li>
<li>With fixed-row format (which is used when FIELDS TERMINATED BY and FIELDS ENCLOSED BY are both empty), NULL is written as an empty string. <strong>This causes both NULL values and empty strings in the table to be indistinguishable</strong> when written to the file because both are written as empty strings. If you need to be able to tell the two apart when reading the file back in, you should not use fixed-row format.</li>
</ul>
<p>此类场景的解决方案，参考链接：</p>
<p><a href="https://stackoverflow.com/questions/11461790/loading-fixed-width-space-delimited-txt-file-into-mysql">https://stackoverflow.com/questions/11461790/loading-fixed-width-space-delimited-txt-file-into-mysql</a></p>
<p><a href="https://docs.singlestore.com/managed-service/en/reference/sql-reference/data-manipulation-language-dml/load-data.html">https://docs.singlestore.com/managed-service/en/reference/sql-reference/data-manipulation-language-dml/load-data.html</a></p>
<p><a href="https://dev.mysql.com/doc/refman/8.0/en/load-data.html">https://dev.mysql.com/doc/refman/8.0/en/load-data.html</a></p>
<h3 id="导入实践">导入实践</h3>
<h4 id="建表">建表</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">table</span> t1 (
</span></span><span style="display:flex;"><span>	id int,
</span></span><span style="display:flex;"><span>	name VARCHAR(<span style="color:#ae81ff">25</span>)
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><h4 id="准备infile文件数据">准备infile文件数据</h4>
<pre tabindex="0"><code class="language-she" data-lang="she">[root@iZbp15qc4wmx335c268l5mZ cindy]# cat data.txt
3 Alice  
4 bob    
</code></pre><h4 id="尝试导入">尝试导入</h4>
<p>脚本内容：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">LOAD</span> <span style="color:#66d9ef">DATA</span> INFILE  <span style="color:#e6db74">&#39;/home/cindy/data.txt&#39;</span> 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INTO</span> <span style="color:#66d9ef">TABLE</span> t1
</span></span><span style="display:flex;"><span>(<span style="color:#f92672">@</span><span style="color:#66d9ef">row</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SET</span> id <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRIM</span>(SUBSTR(<span style="color:#f92672">@</span><span style="color:#66d9ef">row</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>)),
</span></span><span style="display:flex;"><span>name <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRIM</span>(SUBSTR(<span style="color:#f92672">@</span><span style="color:#66d9ef">row</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">7</span>))
</span></span><span style="display:flex;"><span>;
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">LOAD</span> <span style="color:#66d9ef">DATA</span> INFILE  <span style="color:#e6db74">&#39;/home/cindy/data.txt&#39;</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">INTO</span> <span style="color:#66d9ef">TABLE</span> t1
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-&gt;</span> (<span style="color:#f92672">@</span><span style="color:#66d9ef">row</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">SET</span> id <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRIM</span>(SUBSTR(<span style="color:#f92672">@</span><span style="color:#66d9ef">row</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>)),
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-&gt;</span>     name <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRIM</span>(SUBSTR(<span style="color:#f92672">@</span><span style="color:#66d9ef">row</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">7</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-&gt;</span> ;
</span></span><span style="display:flex;"><span>ERROR <span style="color:#ae81ff">1045</span> (<span style="color:#ae81ff">28000</span>): <span style="color:#66d9ef">Access</span> denied <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">user</span> <span style="color:#e6db74">&#39;cindy&#39;</span><span style="color:#f92672">@</span><span style="color:#e6db74">&#39;%&#39;</span> (<span style="color:#66d9ef">using</span> password: YES)
</span></span></code></pre></div><h4 id="授予file权限">授予FILE权限</h4>
<p>搜索了下，使用 load data语句导入数据需要有处理文件的权限。</p>
<p>参考：</p>
<p><a href="https://blog.csdn.net/qq_37189082/article/details/121249966">https://blog.csdn.net/qq_37189082/article/details/121249966</a></p>
<p><a href="https://www.cnblogs.com/darange/p/10508714.html">https://www.cnblogs.com/darange/p/10508714.html</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">grant</span> file <span style="color:#66d9ef">on</span> <span style="color:#f92672">*</span>.<span style="color:#f92672">*</span> <span style="color:#66d9ef">to</span> <span style="color:#e6db74">&#39;cindy&#39;</span><span style="color:#f92672">@</span><span style="color:#e6db74">&#39;%&#39;</span>;
</span></span><span style="display:flex;"><span>ERROR <span style="color:#ae81ff">1045</span> (<span style="color:#ae81ff">28000</span>): <span style="color:#66d9ef">Access</span> denied <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">user</span> <span style="color:#e6db74">&#39;cindy&#39;</span><span style="color:#f92672">@</span><span style="color:#e6db74">&#39;%&#39;</span> (<span style="color:#66d9ef">using</span> password: YES)
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 用cindy用户执行报错，原来需要用root用户授权
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">grant</span> file <span style="color:#66d9ef">on</span> <span style="color:#f92672">*</span>.<span style="color:#f92672">*</span> <span style="color:#66d9ef">to</span> <span style="color:#e6db74">&#39;cindy&#39;</span><span style="color:#f92672">@</span><span style="color:#e6db74">&#39;%&#39;</span>;
</span></span><span style="display:flex;"><span>Query OK, <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">rows</span> affected (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">01</span> sec)
</span></span></code></pre></div><h4 id="再次尝试导入">再次尝试导入</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">LOAD</span> <span style="color:#66d9ef">DATA</span> INFILE  <span style="color:#e6db74">&#39;/home/cindy/data.txt&#39;</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">INTO</span> <span style="color:#66d9ef">TABLE</span> t1
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-&gt;</span> (<span style="color:#f92672">@</span><span style="color:#66d9ef">row</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">SET</span> id <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRIM</span>(SUBSTR(<span style="color:#f92672">@</span><span style="color:#66d9ef">row</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>)),
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-&gt;</span> name <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRIM</span>(SUBSTR(<span style="color:#f92672">@</span><span style="color:#66d9ef">row</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">7</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-&gt;</span> ;
</span></span><span style="display:flex;"><span>ERROR <span style="color:#ae81ff">1290</span> (HY000): The MySQL server <span style="color:#66d9ef">is</span> running <span style="color:#66d9ef">with</span> the <span style="color:#75715e">--secure-file-priv option so it cannot execute this statement
</span></span></span></code></pre></div><h4 id="secure_file_priv参数修改">secure_file_priv参数修改</h4>
<p>上述报错的解决方案参考：https://blog.csdn.net/lz6363/article/details/115805495</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">show</span> <span style="color:#66d9ef">global</span> variables <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;%secure_file_priv%&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">------------------+-------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> Variable_name    <span style="color:#f92672">|</span> Value <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">------------------+-------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> secure_file_priv <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span>  <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">------------------+-------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#ae81ff">1</span> <span style="color:#66d9ef">row</span> <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">12</span> sec)
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 查看官方文档，secure_file_priv参数用于限制LOAD DATA, SELECT …OUTFILE, LOAD_FILE()传到哪个指定目录。
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- secure_file_priv 为 NULL 时，表示限制mysqld不允许导入或导出。
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- secure_file_priv 为 /tmp 时，表示限制mysqld只能在/tmp目录中执行导入导出，其他目录不能执行。
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- secure_file_priv 没有值时，表示不限制mysqld在任意目录的导入导出。
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- 解决方案：1、将允许的文档路径secure-file-priv改为所需的路径；2、干脆设置secure_file_priv=&#39;&#39;，表示任意目录。我采取后者.
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>vim /etc/my.cnf
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 加上以下这行：</span>
</span></span><span style="display:flex;"><span>secure_file_priv<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;</span> <span style="color:#75715e"># 允许导入导出任何路径的文件</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 重启数据库</span>
</span></span><span style="display:flex;"><span>/etc/init.d/mysqld restart
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#75715e">-- 再次查询，修改成功
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">show</span> <span style="color:#66d9ef">global</span> variables <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;%secure_file_priv%&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">------------------+-------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> Variable_name    <span style="color:#f92672">|</span> Value <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">------------------+-------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> secure_file_priv <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">------------------+-------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#ae81ff">1</span> <span style="color:#66d9ef">row</span> <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)
</span></span></code></pre></div><h4 id="再次尝试导入-1">再次尝试导入</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">LOAD</span> <span style="color:#66d9ef">DATA</span> INFILE  <span style="color:#e6db74">&#39;/home/cindy/data.txt&#39;</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">INTO</span> <span style="color:#66d9ef">TABLE</span> t1
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-&gt;</span> (<span style="color:#f92672">@</span><span style="color:#66d9ef">row</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">SET</span> id <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRIM</span>(SUBSTR(<span style="color:#f92672">@</span><span style="color:#66d9ef">row</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>)),
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-&gt;</span> name <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRIM</span>(SUBSTR(<span style="color:#f92672">@</span><span style="color:#66d9ef">row</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">7</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-&gt;</span> ;
</span></span><span style="display:flex;"><span>ERROR <span style="color:#ae81ff">13</span> (HY000): Can<span style="color:#e6db74">&#39;t get stat of &#39;</span><span style="color:#f92672">/</span>home<span style="color:#f92672">/</span>cindy<span style="color:#f92672">/</span><span style="color:#66d9ef">data</span>.txt<span style="color:#e6db74">&#39; (Errcode: 13 - Permission denied)
</span></span></span></code></pre></div><p>解决方法参考： <a href="https://blog.csdn.net/weixin_39722921/article/details/113156666">https://blog.csdn.net/weixin_39722921/article/details/113156666</a></p>
<blockquote>
<p>将LOAD DATA INFILE</p>
<p>换成</p>
<p>LOAD DATA LOCAL INFILE</p>
<p>原因分析：</p>
<p>源自Mysql中文手册：</p>
<p>出于安全原因，当读取位于服务器中的文本文件时， 文件必须位于数据库目录中，或者是全体可读的。另外，要对服务器文件使用LOAD DATA INFILE，您必须拥有FILE权限。</p>
<p>如果指定了LOCAL，则文件会被客户主机上的客户端读取，并被发送到服务器。文件会被给予一个完整的路径名称，以指定确切的位置。</p>
</blockquote>
<p>因此把脚本内容改为：(即，加上<code>LOCAL</code>)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">LOAD</span> <span style="color:#66d9ef">DATA</span> <span style="color:#66d9ef">LOCAL</span> INFILE  <span style="color:#e6db74">&#39;/home/cindy/data.txt&#39;</span> 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INTO</span> <span style="color:#66d9ef">TABLE</span> t1
</span></span><span style="display:flex;"><span>(<span style="color:#f92672">@</span><span style="color:#66d9ef">row</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SET</span> id <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRIM</span>(SUBSTR(<span style="color:#f92672">@</span><span style="color:#66d9ef">row</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>)),
</span></span><span style="display:flex;"><span>name <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRIM</span>(SUBSTR(<span style="color:#f92672">@</span><span style="color:#66d9ef">row</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">7</span>))
</span></span><span style="display:flex;"><span>;
</span></span></code></pre></div><h4 id="再次尝试导入-2">再次尝试导入</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">LOAD</span> <span style="color:#66d9ef">DATA</span> <span style="color:#66d9ef">LOCAL</span> INFILE  <span style="color:#e6db74">&#39;/home/cindy/data.txt&#39;</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">INTO</span> <span style="color:#66d9ef">TABLE</span> t1
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-&gt;</span> (<span style="color:#f92672">@</span><span style="color:#66d9ef">row</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">SET</span> id <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRIM</span>(SUBSTR(<span style="color:#f92672">@</span><span style="color:#66d9ef">row</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>)),
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-&gt;</span> name <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRIM</span>(SUBSTR(<span style="color:#f92672">@</span><span style="color:#66d9ef">row</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">7</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-&gt;</span> ;
</span></span><span style="display:flex;"><span>Query OK, <span style="color:#ae81ff">3</span> <span style="color:#66d9ef">rows</span> affected, <span style="color:#ae81ff">1</span> warning (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">02</span> sec)
</span></span><span style="display:flex;"><span>Records: <span style="color:#ae81ff">3</span>  Deleted: <span style="color:#ae81ff">0</span>  Skipped: <span style="color:#ae81ff">0</span>  Warnings: <span style="color:#ae81ff">1</span>
</span></span></code></pre></div><p>看起来有戏，看看现在的表结果：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> t1;
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">------+-------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> id   <span style="color:#f92672">|</span> name  <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">------+-------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span>    <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> cindy <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>    <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> kexin <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> Alice <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>    <span style="color:#ae81ff">4</span> <span style="color:#f92672">|</span> bob   <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>    <span style="color:#ae81ff">0</span> <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">------+-------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#ae81ff">5</span> <span style="color:#66d9ef">rows</span> <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)
</span></span></code></pre></div><p><strong>成功了！！</strong></p>
<p>id为3,4,0的记录是刚insert的，其中0的那一条应该是从空白行得来的。。（这样不合适的数据，当然也是有waring的⬇️）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">show</span> warnings;
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">---------+------+------------------------------------------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> <span style="color:#66d9ef">Level</span>   <span style="color:#f92672">|</span> Code <span style="color:#f92672">|</span> Message                                              <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">---------+------+------------------------------------------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> Warning <span style="color:#f92672">|</span> <span style="color:#ae81ff">1366</span> <span style="color:#f92672">|</span> Incorrect integer value: <span style="color:#e6db74">&#39;&#39;</span> <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">column</span> <span style="color:#e6db74">&#39;id&#39;</span> <span style="color:#66d9ef">at</span> <span style="color:#66d9ef">row</span> <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">---------+------+------------------------------------------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#ae81ff">1</span> <span style="color:#66d9ef">row</span> <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">07</span> sec)
</span></span></code></pre></div><h4 id="将insert脚本作为sql脚本执行">将insert脚本作为sql脚本执行</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@iZbp15qc4wmx335c268l5mZ cindy<span style="color:#f92672">]</span><span style="color:#75715e"># cat insert.sql</span>
</span></span><span style="display:flex;"><span>use test_db;
</span></span><span style="display:flex;"><span>LOAD DATA LOCAL INFILE  <span style="color:#e6db74">&#39;/home/cindy/data.txt&#39;</span> 
</span></span><span style="display:flex;"><span>INTO TABLE t1
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>@row<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>SET id <span style="color:#f92672">=</span> TRIM<span style="color:#f92672">(</span>SUBSTR<span style="color:#f92672">(</span>@row,1,2<span style="color:#f92672">))</span>,
</span></span><span style="display:flex;"><span>name <span style="color:#f92672">=</span> TRIM<span style="color:#f92672">(</span>SUBSTR<span style="color:#f92672">(</span>@row,3,7<span style="color:#f92672">))</span>
</span></span><span style="display:flex;"><span>;
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">source</span> <span style="color:#f92672">/</span>home<span style="color:#f92672">/</span>cindy<span style="color:#f92672">/</span><span style="color:#66d9ef">insert</span>.<span style="color:#66d9ef">sql</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Database</span> changed
</span></span><span style="display:flex;"><span>Query OK, <span style="color:#ae81ff">3</span> <span style="color:#66d9ef">rows</span> affected, <span style="color:#ae81ff">1</span> warning (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">09</span> sec)
</span></span><span style="display:flex;"><span>Records: <span style="color:#ae81ff">3</span>  Deleted: <span style="color:#ae81ff">0</span>  Skipped: <span style="color:#ae81ff">0</span>  Warnings: <span style="color:#ae81ff">1</span>
</span></span></code></pre></div><h2 id="参考链接">参考链接</h2>
<p><a href="https://www.runoob.com/w3cnote/linux-mysql-import-export-data.html">https://www.runoob.com/w3cnote/linux-mysql-import-export-data.html</a></p>
<p><a href="https://juejin.cn/post/6992489420188286983">https://juejin.cn/post/6992489420188286983</a></p>
<p><a href="https://juejin.cn/post/7039542872051302436">https://juejin.cn/post/7039542872051302436</a></p>
<p><a href="https://www.modb.pro/db/98539">https://www.modb.pro/db/98539</a></p>
</section>

  
  
  <footer class="mt-12 flex flex-wrap">
     
    <a
      class="mr-1.5 mb-1.5 rounded-lg bg-black/[3%] px-5 py-2 no-underline dark:bg-white/[8%]"
      href="https://huangxindi.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93"
      >数据库</a
    >
    
  </footer>
  

  
  
  
  <nav class="mt-24 flex rounded-lg bg-black/[3%] text-lg dark:bg-white/[8%]">
    
    <a
      class="flex w-1/2 items-center rounded-l-md p-6 pr-3 no-underline hover:bg-black/[2%]"
      href="https://huangxindi.com/post/workspace/01-tech/database/oracle-mysql%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB%E6%95%B0%E6%8D%AE%E4%BA%8B%E9%A1%B9/"
      ><span class="mr-1.5">←</span><span>oracle-&gt;mysql数据迁移数据事项</span></a
    >
    
    
    <a
      class="ml-auto flex w-1/2 items-center justify-end rounded-r-md p-6 pl-3 no-underline hover:bg-black/[2%]"
      href="https://huangxindi.com/post/workspace/01-tech/linux/linux-%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/"
      ><span>Linux-磁盘管理</span><span class="ml-1.5">→</span></a
    >
    
  </nav>
  

  
  

  
  
  <div class="mt-24" id="graphcomment"></div>
  <script type="text/javascript">
    var __semio__params = {
      graphcommentId: 'YOUR_GRAPH_COMMENT_ID',
      behaviour: {
        
      },
      
    };

    function __semio__onload() {
      __semio__gc_graphlogin(__semio__params);
    }

    (function () {
      var gc = document.createElement('script');
      gc.type = 'text/javascript';
      gc.async = true;
      gc.onload = __semio__onload;
      gc.defer = true;
      gc.src =
        'https://integration.graphcomment.com/gc_graphlogin.js?' + Date.now();
      (
        document.getElementsByTagName('head')[0] ||
        document.getElementsByTagName('body')[0]
      ).appendChild(gc);
    })();
  </script>
  
</article>


    </main>

    <footer
  class="opaco mx-auto flex h-[5rem] max-w-3xl items-center px-8 text-[0.9em] opacity-60"
>
  <div class="mr-auto">
    &copy; 2023
    <a class="link" href="https://huangxindi.com/"></a>
  </div>
  <a class="link mx-6" href="https://gohugo.io/" rel="noopener" target="_blank"
    >Powered by Hugo️️</a
  >️
  <a
    class="link"
    href="https://github.com/nanxiaobei/hugo-paper"
    rel="noopener"
    target="_blank"
    >▷ Paper 6</a
  >
</footer>

  </body>
</html>
