<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  
    
  <title>Mysql导入导出 | 2MUCH</title>
  <meta name="author" content="cindy.H">
  <meta name="description" content="Mysql导入导出导出 mysqldump (1) 导出完整数据： mysqldump -u用户名 -p 数据库名 &gt; 数据库名.sql 例如：# /usr/local/mysql/bin/mysqldump -uroot -p abc &gt; abc.sql (2) 只导出表结构（使用 -d 选项）： mysqldump -u用户">
  <meta name="keywords" content="blog,tech,personal">

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Mysql导入导出"/>
<meta name="twitter:description" content="Mysql导入导出导出 mysqldump (1) 导出完整数据： mysqldump -u用户名 -p 数据库名 &gt; 数据库名.sql 例如：# /usr/local/mysql/bin/mysqldump -uroot -p abc &gt; abc.sql (2) 只导出表结构（使用 -d 选项）： mysqldump -u用户"/>

  <meta property="og:title" content="Mysql导入导出" />
<meta property="og:description" content="Mysql导入导出导出 mysqldump (1) 导出完整数据： mysqldump -u用户名 -p 数据库名 &gt; 数据库名.sql 例如：# /usr/local/mysql/bin/mysqldump -uroot -p abc &gt; abc.sql (2) 只导出表结构（使用 -d 选项）： mysqldump -u用户" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://huangxindi.com/post/workspace/01-tech/database/mysql%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-11-27T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-11-27T00:00:00+00:00" />


  <link rel="stylesheet" href="/css/bootstrap.min.css"  crossorigin="anonymous">
  
  <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.1/css/all.min.css" rel="stylesheet" type="text/css">

  <link rel="stylesheet" href="/sass/main.css">

  <link rel="stylesheet" href="/zoomjs/zoom.min.css">

  <script src=/js/lazysizes.min.js></script>

  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  

</head>



<body ontouchstart="">
  <nav class="navbar navbar-default navbar-custom navbar-fixed-top invert">
  <div class="container-fluid">
    
    <div class="navbar-header page-scroll">
      <button type="button" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://huangxindi.com/">2MUCH</a>
    </div>
    
    <div id="huxblog_navbar">
      <div class="navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          
          <li><a href="/" title="Home">Home</a></li>
          
          <li><a href="/post" title="Archive">Archive</a></li>
          
          <li><a href="/categories" title="Categories">Categories</a></li>
          
          <li><a href="/about/" title="About">About</a></li>
          

          <li class="search-icon">
            <a href="javascript:void(0)">
              <i class="fa fa-search"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
    
  </div>
  
</nav>
<script>
  
  
  
  var $body = document.body;
  var $toggle = document.querySelector(".navbar-toggle");
  var $navbar = document.querySelector("#huxblog_navbar");
  var $collapse = document.querySelector(".navbar-collapse");

  var __HuxNav__ = {
    close: function () {
      $navbar.className = " ";
      
      setTimeout(function () {
        
        if ($navbar.className.indexOf("in") < 0) {
          $collapse.style.height = "0px";
        }
      }, 400);
    },
    open: function () {
      $collapse.style.height = "auto";
      $navbar.className += " in";
    },
  };

  
  $toggle.addEventListener("click", function (e) {
    if ($navbar.className.indexOf("in") > 0) {
      __HuxNav__.close();
    } else {
      __HuxNav__.open();
    }
  });

  

  document.addEventListener("click", function (e) {
    if (e.target == $toggle) return;
    if (e.target.className == "icon-bar") return;
    __HuxNav__.close();
  });
</script>
  
<div class="search-page">
  <div class="search-icon-close-container">
    <span class="search-icon-close">
      <i class="fa fa-chevron-down"></i>
    </span>
  </div>
  <div class="search-main container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <form></form>
        <input type="text" id="search-input" placeholder="$ grep...">
        </form>
        <div id="search-results" class="mini-post-list"></div>
      </div>
    </div>
  </div>
</div>

  
  


<style type="text/css">
  header.intro-header {
    position: relative;
    background-image: url('');
  }
</style>

<header class="intro-header style-text">

  <div class="header-mask"></div>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-heading">
          <div class="tags">
            
            <a class="tag" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" title="数据库">数据库</a>
            
          </div>
          <h1>Mysql导入导出</h1>
          <h2 class="subheading"></h2>
          <span class="meta">
            Posted by  cindy.H 
            on Sun, Nov 27, 2022
          </span>
        </div>
      </div>
    </div>
  </div>
</header>


  


<article>
  <div class="container">
    <div class="row">

      
      <div class="
              col-lg-8 col-lg-offset-2
              col-md-10 col-md-offset-1
              post-container">
        <h1 id="mysql导入导出">Mysql导入导出<a class="anchorjs-link" href="#mysql%e5%af%bc%e5%85%a5%e5%af%bc%e5%87%ba"></a></h1><h2 id="导出">导出<a class="anchorjs-link" href="#%e5%af%bc%e5%87%ba"></a></h2><ol>
<li>mysqldump</li>
</ol>
<p>(1) 导出完整数据：</p>
<p><code>mysqldump -u用户名 -p 数据库名 &gt; 数据库名.sql</code></p>
<p>例如：<code># /usr/local/mysql/bin/mysqldump -uroot -p abc &gt; abc.sql</code></p>
<p>(2) 只导出表结构（使用<code> -d</code> 选项）：</p>
<p><code>mysqldump -u用户名 -p -d 数据库名 &gt; 数据库名.sql</code></p>
<ol start="2">
<li>INTO OUTFILE</li>
</ol>
<p><a href="https://www.modb.pro/db/98539" target="_blank">https://www.modb.pro/db/98539</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-mysql" data-lang="mysql"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#ff79c6">SELECT</span> <span style="color:#ff79c6">*</span> <span style="color:#ff79c6">FROM</span> data_tbl <span style="color:#ff79c6">--</span>查找数据源，如果是全表所有字段也可以用 <span style="color:#ff79c6">TABLE</span> <span style="color:#ff79c6">&lt;</span>talbe<span style="color:#ff79c6">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#ff79c6">INTO</span> <span style="color:#ff79c6">OUTFILE</span> <span style="color:#f1fa8c">&#34;/tmp/data.txt&#34;</span> <span style="color:#ff79c6">--</span>数据输出文件
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>FIELDS <span style="color:#ff79c6">TERMINATED</span> <span style="color:#ff79c6">BY</span> <span style="color:#f1fa8c">&#39;,&#39;</span>  <span style="color:#ff79c6">--</span>字段分隔符
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#ff79c6">OPTIONALLY</span> <span style="color:#ff79c6">ENCLOSED</span> <span style="color:#ff79c6">BY</span> <span style="color:#f1fa8c">&#39;&#34;&#39;</span> <span style="color:#ff79c6">--</span>字段引用符
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#ff79c6">LINES</span> <span style="color:#ff79c6">TERMINATED</span> <span style="color:#ff79c6">BY</span> <span style="color:#f1fa8c">&#39;\n&#39;</span> <span style="color:#ff79c6">--</span>整条记录分割符
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>;
</span></span></code></pre></div><h2 id="导入">导入<a class="anchorjs-link" href="#%e5%af%bc%e5%85%a5"></a></h2><ol>
<li>&lt;.sql</li>
</ol>
<p><code>mysql -u用户名 -p 数据库名 &lt; 数据库名.sql</code></p>
<p>例如：</p>
<p><code># mysql -uroot -p123456 &lt; abc.sql</code></p>
<ol start="2">
<li>source</li>
</ol>
<p>(1) 连接数据库：<code>mysql -u {用户名} -p</code> 回车 再输入<strong>密码</strong> <code>mysql -u root -p</code> 回车</p>
<p>(2) 指定目标数据库名：<code>use {库名}</code> <code>use eva</code> 回车</p>
<p>(3) 导入文件 <code>source {路径}</code> <code>source C:\Users\chengh\Desktop\user.sql</code> 需要注意的是 你得<strong>有这个文件</strong>，如果没有则会报<em>异常</em></p>
<ol start="3">
<li>load data</li>
</ol>
<p>使用场景和语法参见：https://blog.csdn.net/u012815136/article/details/88953289</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-mysql" data-lang="mysql"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#ff79c6">load</span> data local <span style="color:#ff79c6">infile</span> <span style="color:#f1fa8c">&#39;D:/my_user_info.txt&#39;</span> <span style="color:#ff79c6">into</span> <span style="color:#ff79c6">table</span> user_info
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#ff79c6">CHARACTER</span> <span style="color:#8be9fd">SET</span> utf8 <span style="color:#6272a4">-- 可选，指定导入文件的编码，避免中文乱码问题。假如这里文件 my_user_info.txt 的编码为 gbk，那么这里编码就应该设为 gbk 了
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#6272a4"></span>FIELDS <span style="color:#ff79c6">TERMINATED</span> <span style="color:#ff79c6">BY</span> <span style="color:#f1fa8c">&#39;||&#39;</span> <span style="color:#6272a4">-- 字段分隔符，每个字段(列)以什么字符分隔，默认是 \t
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#6272a4"></span>	<span style="color:#ff79c6">OPTIONALLY</span> <span style="color:#ff79c6">ENCLOSED</span> <span style="color:#ff79c6">BY</span> <span style="color:#f1fa8c">&#39;&#39;</span> <span style="color:#6272a4">-- 文本限定符，每个字段被什么字符包围，默认是空字符
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#6272a4"></span>	<span style="color:#ff79c6">ESCAPED</span> <span style="color:#ff79c6">BY</span> <span style="color:#f1fa8c">&#39;\\&#39;</span> <span style="color:#6272a4">-- 转义符，默认是 \
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span><span style="color:#6272a4"></span><span style="color:#ff79c6">LINES</span> <span style="color:#ff79c6">TERMINATED</span> <span style="color:#ff79c6">BY</span> <span style="color:#f1fa8c">&#39;\n&#39;</span> <span style="color:#6272a4">-- 记录分隔符，如字段本身也含\n，那么应先去除，否则load data 会误将其视作另一行记录进行导入
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span><span style="color:#6272a4"></span>(id, name, age, address, create_date) <span style="color:#6272a4">-- 每一行文本按顺序对应的表字段，建议不要省略
</span></span></span></code></pre></div><p>注意事项：</p>
<p><code>LOAD DATA INFILE</code>和 <code>SELECT INTO OUTFILE</code>是相互依赖的，即：如果你导出方式使用了 <code>SELECT INTO OUTFILE</code>，那么导入的时候就需要使用 <code>LOAD DATA INFILE</code>进行导入。<strong>需要格外注意，该方式会锁全表</strong>。</p>
<p><strong>LOAD DATA格式</strong></p>
<p><a href="https://dev.mysql.com/doc/refman/8.0/en/load-data.html" target="_blank">https://dev.mysql.com/doc/refman/8.0/en/load-data.html</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#ff79c6">LOAD</span> <span style="color:#ff79c6">DATA</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>    [LOW_PRIORITY <span style="color:#ff79c6">|</span> CONCURRENT] [<span style="color:#ff79c6">LOCAL</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>    INFILE <span style="color:#f1fa8c">&#39;file_name&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    [<span style="color:#ff79c6">REPLACE</span> <span style="color:#ff79c6">|</span> <span style="color:#ff79c6">IGNORE</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    <span style="color:#ff79c6">INTO</span> <span style="color:#ff79c6">TABLE</span> tbl_name
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>    [PARTITION (partition_name [, partition_name] ...)]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>    [<span style="color:#8be9fd;font-style:italic">CHARACTER</span> <span style="color:#ff79c6">SET</span> charset_name]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>    [{FIELDS <span style="color:#ff79c6">|</span> COLUMNS}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>        [TERMINATED <span style="color:#ff79c6">BY</span> <span style="color:#f1fa8c">&#39;string&#39;</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>        [[OPTIONALLY] ENCLOSED <span style="color:#ff79c6">BY</span> <span style="color:#f1fa8c">&#39;char&#39;</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>        [ESCAPED <span style="color:#ff79c6">BY</span> <span style="color:#f1fa8c">&#39;char&#39;</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>    ]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>    [LINES
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>        [STARTING <span style="color:#ff79c6">BY</span> <span style="color:#f1fa8c">&#39;string&#39;</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>        [TERMINATED <span style="color:#ff79c6">BY</span> <span style="color:#f1fa8c">&#39;string&#39;</span>]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>    ]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>    [<span style="color:#ff79c6">IGNORE</span> <span style="color:#8be9fd;font-style:italic">number</span> {LINES <span style="color:#ff79c6">|</span> <span style="color:#ff79c6">ROWS</span>}]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>    [(col_name_or_user_var
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>        [, col_name_or_user_var] ...)]
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>    [<span style="color:#ff79c6">SET</span> col_name<span style="color:#ff79c6">=</span>{expr <span style="color:#ff79c6">|</span> <span style="color:#ff79c6">DEFAULT</span>}
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>        [, col_name<span style="color:#ff79c6">=</span>{expr <span style="color:#ff79c6">|</span> <span style="color:#ff79c6">DEFAULT</span>}] ...]
</span></span></code></pre></div><h2 id="shell脚本实现导入导出">shell脚本实现导入导出<a class="anchorjs-link" href="#shell%e8%84%9a%e6%9c%ac%e5%ae%9e%e7%8e%b0%e5%af%bc%e5%85%a5%e5%af%bc%e5%87%ba"></a></h2><ol>
<li><code>select into outfile</code> &amp; <code>load data infile</code></li>
</ol>
<p><a href="https://blog.csdn.net/u013946356/article/details/84960273" target="_blank">https://blog.csdn.net/u013946356/article/details/84960273</a></p>
<h2 id="如何使用导入定长文件fixed-width-records-">如何使用导入定长文件（fixed-width records ）<a class="anchorjs-link" href="#%e5%a6%82%e4%bd%95%e4%bd%bf%e7%94%a8%e5%af%bc%e5%85%a5%e5%ae%9a%e9%95%bf%e6%96%87%e4%bb%b6fixed-width-records-"></a></h2><p>定长文件：不同于用分隔符（如逗号或空格）来分割每行记录的各字段，定长数据文件是根据约定好的各字段长度来组织数据文件的。如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span> slideNum, startTime, endTime
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>   <span style="color:#bd93f9">1</span>     <span style="color:#bd93f9">75175</span>.<span style="color:#bd93f9">18</span>     <span style="color:#bd93f9">95128</span>.<span style="color:#bd93f9">46</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>   <span style="color:#bd93f9">1</span>    <span style="color:#bd93f9">790890</span>.<span style="color:#bd93f9">89</span>    <span style="color:#bd93f9">795829</span>.<span style="color:#bd93f9">16</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>   <span style="color:#bd93f9">1</span>    <span style="color:#bd93f9">875975</span>.<span style="color:#bd93f9">98</span>    <span style="color:#bd93f9">880914</span>.<span style="color:#bd93f9">25</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>   <span style="color:#bd93f9">8</span>   <span style="color:#bd93f9">2137704</span>.<span style="color:#bd93f9">37</span>   <span style="color:#bd93f9">2162195</span>.<span style="color:#bd93f9">53</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>   <span style="color:#bd93f9">8</span>   <span style="color:#bd93f9">2167267</span>.<span style="color:#bd93f9">27</span>   <span style="color:#bd93f9">2375275</span>.<span style="color:#bd93f9">28</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>  <span style="color:#bd93f9">10</span>   <span style="color:#bd93f9">2375408</span>.<span style="color:#bd93f9">74</span>   <span style="color:#bd93f9">2763997</span>.<span style="color:#bd93f9">33</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>  <span style="color:#bd93f9">14</span>   <span style="color:#bd93f9">2764264</span>.<span style="color:#bd93f9">26</span>   <span style="color:#bd93f9">2804437</span>.<span style="color:#bd93f9">77</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>  <span style="color:#bd93f9">15</span>   <span style="color:#bd93f9">2804504</span>.<span style="color:#bd93f9">50</span>   <span style="color:#bd93f9">2881981</span>.<span style="color:#bd93f9">98</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>  <span style="color:#bd93f9">16</span>   <span style="color:#bd93f9">2882048</span>.<span style="color:#bd93f9">72</span>   <span style="color:#bd93f9">2887921</span>.<span style="color:#bd93f9">25</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>  <span style="color:#bd93f9">16</span>   <span style="color:#bd93f9">2993093</span>.<span style="color:#bd93f9">09</span>   <span style="color:#bd93f9">2998031</span>.<span style="color:#bd93f9">36</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>  <span style="color:#bd93f9">19</span>   <span style="color:#bd93f9">3004104</span>.<span style="color:#bd93f9">10</span>   <span style="color:#bd93f9">3008041</span>.<span style="color:#bd93f9">37</span>
</span></span></code></pre></div><p><code>LOAD DATA</code>虽然很好地支持了分隔符格式的数据文件导入，但是这类型的数据文件，需要进行特殊的处理。</p>
<p>可参考：https://stackoverflow.com/questions/11461790/loading-fixed-width-space-delimited-txt-file-into-mysql</p>
<p>针对上面的例子，解决方案可以是（with user variables (<code>@row</code>)）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#ff79c6">LOAD</span> <span style="color:#ff79c6">DATA</span> <span style="color:#ff79c6">LOCAL</span> INFILE 
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#f1fa8c">&#39;/some/Path/segmentation.txt&#39;</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#ff79c6">INTO</span> <span style="color:#ff79c6">TABLE</span> clip
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>(<span style="color:#ff79c6">@</span><span style="color:#ff79c6">row</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#ff79c6">SET</span> slideNum <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">TRIM</span>(SUBSTR(<span style="color:#ff79c6">@</span><span style="color:#ff79c6">row</span>,<span style="color:#bd93f9">1</span>,<span style="color:#bd93f9">4</span>)),
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>    startTime <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">TRIM</span>(SUBSTR(<span style="color:#ff79c6">@</span><span style="color:#ff79c6">row</span>,<span style="color:#bd93f9">5</span>,<span style="color:#bd93f9">13</span>)),
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span>    endTime <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">TRIM</span>(SUBSTR(<span style="color:#ff79c6">@</span><span style="color:#ff79c6">row</span>,<span style="color:#bd93f9">18</span>,<span style="color:#bd93f9">13</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span><span>;
</span></span></code></pre></div><p>使用<code>LOAD DATA</code>来处理定长文件的注意事项：</p>
<ul>
<li>Fixed-size format does not work if you are using a <strong>multibyte character set</strong>.</li>
<li>With fixed-row format (which is used when FIELDS TERMINATED BY and FIELDS ENCLOSED BY are both empty), NULL is written as an empty string. <strong>This causes both NULL values and empty strings in the table to be indistinguishable</strong> when written to the file because both are written as empty strings. If you need to be able to tell the two apart when reading the file back in, you should not use fixed-row format.</li>
</ul>
<p>此类场景的解决方案，参考链接：</p>
<p><a href="https://stackoverflow.com/questions/11461790/loading-fixed-width-space-delimited-txt-file-into-mysql" target="_blank">https://stackoverflow.com/questions/11461790/loading-fixed-width-space-delimited-txt-file-into-mysql</a></p>
<p><a href="https://docs.singlestore.com/managed-service/en/reference/sql-reference/data-manipulation-language-dml/load-data.html" target="_blank">https://docs.singlestore.com/managed-service/en/reference/sql-reference/data-manipulation-language-dml/load-data.html</a></p>
<p><a href="https://dev.mysql.com/doc/refman/8.0/en/load-data.html" target="_blank">https://dev.mysql.com/doc/refman/8.0/en/load-data.html</a></p>
<h3 id="导入实践">导入实践<a class="anchorjs-link" href="#%e5%af%bc%e5%85%a5%e5%ae%9e%e8%b7%b5"></a></h3><h4 id="建表">建表<a class="anchorjs-link" href="#%e5%bb%ba%e8%a1%a8"></a></h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#ff79c6">create</span> <span style="color:#ff79c6">table</span> t1 (
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>	id <span style="color:#8be9fd;font-style:italic">int</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>	name <span style="color:#8be9fd;font-style:italic">VARCHAR</span>(<span style="color:#bd93f9">25</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>)
</span></span></code></pre></div><h4 id="准备infile文件数据">准备infile文件数据<a class="anchorjs-link" href="#%e5%87%86%e5%a4%87infile%e6%96%87%e4%bb%b6%e6%95%b0%e6%8d%ae"></a></h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>[root@iZbp15qc4wmx335c268l5mZ cindy]# cat data.txt
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>3 Alice  
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>4 bob    
</span></span></code></pre></div><h4 id="尝试导入">尝试导入<a class="anchorjs-link" href="#%e5%b0%9d%e8%af%95%e5%af%bc%e5%85%a5"></a></h4><p>脚本内容：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#ff79c6">LOAD</span> <span style="color:#ff79c6">DATA</span> INFILE  <span style="color:#f1fa8c">&#39;/home/cindy/data.txt&#39;</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#ff79c6">INTO</span> <span style="color:#ff79c6">TABLE</span> t1
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>(<span style="color:#ff79c6">@</span><span style="color:#ff79c6">row</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#ff79c6">SET</span> id <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">TRIM</span>(SUBSTR(<span style="color:#ff79c6">@</span><span style="color:#ff79c6">row</span>,<span style="color:#bd93f9">1</span>,<span style="color:#bd93f9">2</span>)),
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>name <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">TRIM</span>(SUBSTR(<span style="color:#ff79c6">@</span><span style="color:#ff79c6">row</span>,<span style="color:#bd93f9">3</span>,<span style="color:#bd93f9">7</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>;
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>mysql<span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">LOAD</span> <span style="color:#ff79c6">DATA</span> INFILE  <span style="color:#f1fa8c">&#39;/home/cindy/data.txt&#39;</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>    <span style="color:#ff79c6">-&gt;</span> <span style="color:#ff79c6">INTO</span> <span style="color:#ff79c6">TABLE</span> t1
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>    <span style="color:#ff79c6">-&gt;</span> (<span style="color:#ff79c6">@</span><span style="color:#ff79c6">row</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>    <span style="color:#ff79c6">-&gt;</span> <span style="color:#ff79c6">SET</span> id <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">TRIM</span>(SUBSTR(<span style="color:#ff79c6">@</span><span style="color:#ff79c6">row</span>,<span style="color:#bd93f9">1</span>,<span style="color:#bd93f9">2</span>)),
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>    <span style="color:#ff79c6">-&gt;</span>     name <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">TRIM</span>(SUBSTR(<span style="color:#ff79c6">@</span><span style="color:#ff79c6">row</span>,<span style="color:#bd93f9">3</span>,<span style="color:#bd93f9">7</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>    <span style="color:#ff79c6">-&gt;</span> ;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span>ERROR <span style="color:#bd93f9">1045</span> (<span style="color:#bd93f9">28000</span>): <span style="color:#ff79c6">Access</span> denied <span style="color:#ff79c6">for</span> <span style="color:#ff79c6">user</span> <span style="color:#f1fa8c">&#39;cindy&#39;</span><span style="color:#ff79c6">@</span><span style="color:#f1fa8c">&#39;%&#39;</span> (<span style="color:#ff79c6">using</span> password: YES)
</span></span></code></pre></div><h4 id="授予file权限">授予FILE权限<a class="anchorjs-link" href="#%e6%8e%88%e4%ba%88file%e6%9d%83%e9%99%90"></a></h4><p>搜索了下，使用 load data语句导入数据需要有处理文件的权限。</p>
<p>参考：</p>
<p><a href="https://blog.csdn.net/qq_37189082/article/details/121249966" target="_blank">https://blog.csdn.net/qq_37189082/article/details/121249966</a></p>
<p><a href="https://www.cnblogs.com/darange/p/10508714.html" target="_blank">https://www.cnblogs.com/darange/p/10508714.html</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>mysql<span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">grant</span> file <span style="color:#ff79c6">on</span> <span style="color:#ff79c6">*</span>.<span style="color:#ff79c6">*</span> <span style="color:#ff79c6">to</span> <span style="color:#f1fa8c">&#39;cindy&#39;</span><span style="color:#ff79c6">@</span><span style="color:#f1fa8c">&#39;%&#39;</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>ERROR <span style="color:#bd93f9">1045</span> (<span style="color:#bd93f9">28000</span>): <span style="color:#ff79c6">Access</span> denied <span style="color:#ff79c6">for</span> <span style="color:#ff79c6">user</span> <span style="color:#f1fa8c">&#39;cindy&#39;</span><span style="color:#ff79c6">@</span><span style="color:#f1fa8c">&#39;%&#39;</span> (<span style="color:#ff79c6">using</span> password: YES)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#6272a4">-- 用cindy用户执行报错，原来需要用root用户授权
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#6272a4"></span>mysql<span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">grant</span> file <span style="color:#ff79c6">on</span> <span style="color:#ff79c6">*</span>.<span style="color:#ff79c6">*</span> <span style="color:#ff79c6">to</span> <span style="color:#f1fa8c">&#39;cindy&#39;</span><span style="color:#ff79c6">@</span><span style="color:#f1fa8c">&#39;%&#39;</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>Query OK, <span style="color:#bd93f9">0</span> <span style="color:#ff79c6">rows</span> affected (<span style="color:#bd93f9">0</span>.<span style="color:#bd93f9">01</span> sec)
</span></span></code></pre></div><h4 id="再次尝试导入">再次尝试导入<a class="anchorjs-link" href="#%e5%86%8d%e6%ac%a1%e5%b0%9d%e8%af%95%e5%af%bc%e5%85%a5"></a></h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>mysql<span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">LOAD</span> <span style="color:#ff79c6">DATA</span> INFILE  <span style="color:#f1fa8c">&#39;/home/cindy/data.txt&#39;</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>    <span style="color:#ff79c6">-&gt;</span> <span style="color:#ff79c6">INTO</span> <span style="color:#ff79c6">TABLE</span> t1
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>    <span style="color:#ff79c6">-&gt;</span> (<span style="color:#ff79c6">@</span><span style="color:#ff79c6">row</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>    <span style="color:#ff79c6">-&gt;</span> <span style="color:#ff79c6">SET</span> id <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">TRIM</span>(SUBSTR(<span style="color:#ff79c6">@</span><span style="color:#ff79c6">row</span>,<span style="color:#bd93f9">1</span>,<span style="color:#bd93f9">2</span>)),
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>    <span style="color:#ff79c6">-&gt;</span> name <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">TRIM</span>(SUBSTR(<span style="color:#ff79c6">@</span><span style="color:#ff79c6">row</span>,<span style="color:#bd93f9">3</span>,<span style="color:#bd93f9">7</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>    <span style="color:#ff79c6">-&gt;</span> ;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span>ERROR <span style="color:#bd93f9">1290</span> (HY000): The MySQL server <span style="color:#ff79c6">is</span> running <span style="color:#ff79c6">with</span> the <span style="color:#6272a4">--secure-file-priv option so it cannot execute this statement
</span></span></span></code></pre></div><h4 id="secure_file_priv参数修改">secure_file_priv参数修改<a class="anchorjs-link" href="#secure_file_priv%e5%8f%82%e6%95%b0%e4%bf%ae%e6%94%b9"></a></h4><p>上述报错的解决方案参考：https://blog.csdn.net/lz6363/article/details/115805495</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>mysql<span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">show</span> <span style="color:#ff79c6">global</span> variables <span style="color:#ff79c6">like</span> <span style="color:#f1fa8c">&#39;%secure_file_priv%&#39;</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#ff79c6">+</span><span style="color:#6272a4">------------------+-------+
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#6272a4"></span><span style="color:#ff79c6">|</span> Variable_name    <span style="color:#ff79c6">|</span> Value <span style="color:#ff79c6">|</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#ff79c6">+</span><span style="color:#6272a4">------------------+-------+
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#6272a4"></span><span style="color:#ff79c6">|</span> secure_file_priv <span style="color:#ff79c6">|</span> <span style="color:#ff79c6">NULL</span>  <span style="color:#ff79c6">|</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#ff79c6">+</span><span style="color:#6272a4">------------------+-------+
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#6272a4"></span><span style="color:#bd93f9">1</span> <span style="color:#ff79c6">row</span> <span style="color:#ff79c6">in</span> <span style="color:#ff79c6">set</span> (<span style="color:#bd93f9">0</span>.<span style="color:#bd93f9">12</span> sec)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#6272a4">-- 查看官方文档，secure_file_priv参数用于限制LOAD DATA, SELECT …OUTFILE, LOAD_FILE()传到哪个指定目录。
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#6272a4">-- secure_file_priv 为 NULL 时，表示限制mysqld不允许导入或导出。
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#6272a4">-- secure_file_priv 为 /tmp 时，表示限制mysqld只能在/tmp目录中执行导入导出，其他目录不能执行。
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#6272a4">-- secure_file_priv 没有值时，表示不限制mysqld在任意目录的导入导出。
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#6272a4">-- 解决方案：1、将允许的文档路径secure-file-priv改为所需的路径；2、干脆设置secure_file_priv=&#39;&#39;，表示任意目录。我采取后者.
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>vim /etc/my.cnf
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#6272a4"># 加上以下这行：</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#8be9fd;font-style:italic">secure_file_priv</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#39;&#39;</span> <span style="color:#6272a4"># 允许导入导出任何路径的文件</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#6272a4"># 重启数据库</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>/etc/init.d/mysqld restart
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#6272a4">-- 再次查询，修改成功
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#6272a4"></span>mysql<span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">show</span> <span style="color:#ff79c6">global</span> variables <span style="color:#ff79c6">like</span> <span style="color:#f1fa8c">&#39;%secure_file_priv%&#39;</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#ff79c6">+</span><span style="color:#6272a4">------------------+-------+
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#6272a4"></span><span style="color:#ff79c6">|</span> Variable_name    <span style="color:#ff79c6">|</span> Value <span style="color:#ff79c6">|</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#ff79c6">+</span><span style="color:#6272a4">------------------+-------+
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span><span style="color:#6272a4"></span><span style="color:#ff79c6">|</span> secure_file_priv <span style="color:#ff79c6">|</span>       <span style="color:#ff79c6">|</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span><span style="color:#ff79c6">+</span><span style="color:#6272a4">------------------+-------+
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span><span><span style="color:#6272a4"></span><span style="color:#bd93f9">1</span> <span style="color:#ff79c6">row</span> <span style="color:#ff79c6">in</span> <span style="color:#ff79c6">set</span> (<span style="color:#bd93f9">0</span>.<span style="color:#bd93f9">00</span> sec)
</span></span></code></pre></div><h4 id="再次尝试导入-1">再次尝试导入<a class="anchorjs-link" href="#%e5%86%8d%e6%ac%a1%e5%b0%9d%e8%af%95%e5%af%bc%e5%85%a5-1"></a></h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>mysql<span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">LOAD</span> <span style="color:#ff79c6">DATA</span> INFILE  <span style="color:#f1fa8c">&#39;/home/cindy/data.txt&#39;</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>    <span style="color:#ff79c6">-&gt;</span> <span style="color:#ff79c6">INTO</span> <span style="color:#ff79c6">TABLE</span> t1
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>    <span style="color:#ff79c6">-&gt;</span> (<span style="color:#ff79c6">@</span><span style="color:#ff79c6">row</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>    <span style="color:#ff79c6">-&gt;</span> <span style="color:#ff79c6">SET</span> id <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">TRIM</span>(SUBSTR(<span style="color:#ff79c6">@</span><span style="color:#ff79c6">row</span>,<span style="color:#bd93f9">1</span>,<span style="color:#bd93f9">2</span>)),
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>    <span style="color:#ff79c6">-&gt;</span> name <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">TRIM</span>(SUBSTR(<span style="color:#ff79c6">@</span><span style="color:#ff79c6">row</span>,<span style="color:#bd93f9">3</span>,<span style="color:#bd93f9">7</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>    <span style="color:#ff79c6">-&gt;</span> ;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span>ERROR <span style="color:#bd93f9">13</span> (HY000): Can<span style="color:#f1fa8c">&#39;t get stat of &#39;</span><span style="color:#ff79c6">/</span>home<span style="color:#ff79c6">/</span>cindy<span style="color:#ff79c6">/</span><span style="color:#ff79c6">data</span>.txt<span style="color:#f1fa8c">&#39; (Errcode: 13 - Permission denied)
</span></span></span></code></pre></div><p>解决方法参考： <a href="https://blog.csdn.net/weixin_39722921/article/details/113156666" target="_blank">https://blog.csdn.net/weixin_39722921/article/details/113156666</a></p>
<blockquote>
<p>将LOAD DATA INFILE</p>
<p>换成</p>
<p>LOAD DATA LOCAL INFILE</p>
<p>原因分析：</p>
<p>源自Mysql中文手册：</p>
<p>出于安全原因，当读取位于服务器中的文本文件时， 文件必须位于数据库目录中，或者是全体可读的。另外，要对服务器文件使用LOAD DATA INFILE，您必须拥有FILE权限。</p>
<p>如果指定了LOCAL，则文件会被客户主机上的客户端读取，并被发送到服务器。文件会被给予一个完整的路径名称，以指定确切的位置。</p>
</blockquote>
<p>因此把脚本内容改为：(即，加上<code>LOCAL</code>)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#ff79c6">LOAD</span> <span style="color:#ff79c6">DATA</span> <span style="color:#ff79c6">LOCAL</span> INFILE  <span style="color:#f1fa8c">&#39;/home/cindy/data.txt&#39;</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#ff79c6">INTO</span> <span style="color:#ff79c6">TABLE</span> t1
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>(<span style="color:#ff79c6">@</span><span style="color:#ff79c6">row</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#ff79c6">SET</span> id <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">TRIM</span>(SUBSTR(<span style="color:#ff79c6">@</span><span style="color:#ff79c6">row</span>,<span style="color:#bd93f9">1</span>,<span style="color:#bd93f9">2</span>)),
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>name <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">TRIM</span>(SUBSTR(<span style="color:#ff79c6">@</span><span style="color:#ff79c6">row</span>,<span style="color:#bd93f9">3</span>,<span style="color:#bd93f9">7</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>;
</span></span></code></pre></div><h4 id="再次尝试导入-2">再次尝试导入<a class="anchorjs-link" href="#%e5%86%8d%e6%ac%a1%e5%b0%9d%e8%af%95%e5%af%bc%e5%85%a5-2"></a></h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>mysql<span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">LOAD</span> <span style="color:#ff79c6">DATA</span> <span style="color:#ff79c6">LOCAL</span> INFILE  <span style="color:#f1fa8c">&#39;/home/cindy/data.txt&#39;</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>    <span style="color:#ff79c6">-&gt;</span> <span style="color:#ff79c6">INTO</span> <span style="color:#ff79c6">TABLE</span> t1
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>    <span style="color:#ff79c6">-&gt;</span> (<span style="color:#ff79c6">@</span><span style="color:#ff79c6">row</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>    <span style="color:#ff79c6">-&gt;</span> <span style="color:#ff79c6">SET</span> id <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">TRIM</span>(SUBSTR(<span style="color:#ff79c6">@</span><span style="color:#ff79c6">row</span>,<span style="color:#bd93f9">1</span>,<span style="color:#bd93f9">2</span>)),
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>    <span style="color:#ff79c6">-&gt;</span> name <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">TRIM</span>(SUBSTR(<span style="color:#ff79c6">@</span><span style="color:#ff79c6">row</span>,<span style="color:#bd93f9">3</span>,<span style="color:#bd93f9">7</span>))
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>    <span style="color:#ff79c6">-&gt;</span> ;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span>Query OK, <span style="color:#bd93f9">3</span> <span style="color:#ff79c6">rows</span> affected, <span style="color:#bd93f9">1</span> warning (<span style="color:#bd93f9">0</span>.<span style="color:#bd93f9">02</span> sec)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span><span>Records: <span style="color:#bd93f9">3</span>  Deleted: <span style="color:#bd93f9">0</span>  Skipped: <span style="color:#bd93f9">0</span>  Warnings: <span style="color:#bd93f9">1</span>
</span></span></code></pre></div><p>看起来有戏，看看现在的表结果：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>mysql<span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">select</span> <span style="color:#ff79c6">*</span> <span style="color:#ff79c6">from</span> t1;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#ff79c6">+</span><span style="color:#6272a4">------+-------+
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#6272a4"></span><span style="color:#ff79c6">|</span> id   <span style="color:#ff79c6">|</span> name  <span style="color:#ff79c6">|</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#ff79c6">+</span><span style="color:#6272a4">------+-------+
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#6272a4"></span><span style="color:#ff79c6">|</span>    <span style="color:#bd93f9">1</span> <span style="color:#ff79c6">|</span> cindy <span style="color:#ff79c6">|</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#ff79c6">|</span>    <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">|</span> kexin <span style="color:#ff79c6">|</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#ff79c6">|</span>    <span style="color:#bd93f9">3</span> <span style="color:#ff79c6">|</span> Alice <span style="color:#ff79c6">|</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#ff79c6">|</span>    <span style="color:#bd93f9">4</span> <span style="color:#ff79c6">|</span> bob   <span style="color:#ff79c6">|</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#ff79c6">|</span>    <span style="color:#bd93f9">0</span> <span style="color:#ff79c6">|</span>       <span style="color:#ff79c6">|</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#ff79c6">+</span><span style="color:#6272a4">------+-------+
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#6272a4"></span><span style="color:#bd93f9">5</span> <span style="color:#ff79c6">rows</span> <span style="color:#ff79c6">in</span> <span style="color:#ff79c6">set</span> (<span style="color:#bd93f9">0</span>.<span style="color:#bd93f9">00</span> sec)
</span></span></code></pre></div><p><strong>成功了！！</strong></p>
<p>id为3,4,0的记录是刚insert的，其中0的那一条应该是从空白行得来的。。（这样不合适的数据，当然也是有waring的⬇️）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>mysql<span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">show</span> warnings;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#ff79c6">+</span><span style="color:#6272a4">---------+------+------------------------------------------------------+
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#6272a4"></span><span style="color:#ff79c6">|</span> <span style="color:#ff79c6">Level</span>   <span style="color:#ff79c6">|</span> Code <span style="color:#ff79c6">|</span> Message                                              <span style="color:#ff79c6">|</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#ff79c6">+</span><span style="color:#6272a4">---------+------+------------------------------------------------------+
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#6272a4"></span><span style="color:#ff79c6">|</span> Warning <span style="color:#ff79c6">|</span> <span style="color:#bd93f9">1366</span> <span style="color:#ff79c6">|</span> Incorrect <span style="color:#8be9fd;font-style:italic">integer</span> value: <span style="color:#f1fa8c">&#39;&#39;</span> <span style="color:#ff79c6">for</span> <span style="color:#ff79c6">column</span> <span style="color:#f1fa8c">&#39;id&#39;</span> <span style="color:#ff79c6">at</span> <span style="color:#ff79c6">row</span> <span style="color:#bd93f9">3</span> <span style="color:#ff79c6">|</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span><span style="color:#ff79c6">+</span><span style="color:#6272a4">---------+------+------------------------------------------------------+
</span></span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span><span style="color:#6272a4"></span><span style="color:#bd93f9">1</span> <span style="color:#ff79c6">row</span> <span style="color:#ff79c6">in</span> <span style="color:#ff79c6">set</span> (<span style="color:#bd93f9">0</span>.<span style="color:#bd93f9">07</span> sec)
</span></span></code></pre></div><h4 id="将insert脚本作为sql脚本执行">将insert脚本作为sql脚本执行<a class="anchorjs-link" href="#%e5%b0%86insert%e8%84%9a%e6%9c%ac%e4%bd%9c%e4%b8%basql%e8%84%9a%e6%9c%ac%e6%89%a7%e8%a1%8c"></a></h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#ff79c6">[</span>root@iZbp15qc4wmx335c268l5mZ cindy<span style="color:#ff79c6">]</span><span style="color:#6272a4"># cat insert.sql</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>use test_db;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>LOAD DATA LOCAL INFILE  <span style="color:#f1fa8c">&#39;/home/cindy/data.txt&#39;</span> 
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>INTO TABLE t1
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#ff79c6">(</span>@row<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>SET <span style="color:#8be9fd;font-style:italic">id</span> <span style="color:#ff79c6">=</span> TRIM<span style="color:#ff79c6">(</span>SUBSTR<span style="color:#ff79c6">(</span>@row,1,2<span style="color:#ff79c6">))</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span><span style="color:#8be9fd;font-style:italic">name</span> <span style="color:#ff79c6">=</span> TRIM<span style="color:#ff79c6">(</span>SUBSTR<span style="color:#ff79c6">(</span>@row,3,7<span style="color:#ff79c6">))</span>
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span><span>;
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>mysql<span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">source</span> <span style="color:#ff79c6">/</span>home<span style="color:#ff79c6">/</span>cindy<span style="color:#ff79c6">/</span><span style="color:#ff79c6">insert</span>.<span style="color:#ff79c6">sql</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#ff79c6">Database</span> changed
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>Query OK, <span style="color:#bd93f9">3</span> <span style="color:#ff79c6">rows</span> affected, <span style="color:#bd93f9">1</span> warning (<span style="color:#bd93f9">0</span>.<span style="color:#bd93f9">09</span> sec)
</span></span><span style="display:flex;"><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>Records: <span style="color:#bd93f9">3</span>  Deleted: <span style="color:#bd93f9">0</span>  Skipped: <span style="color:#bd93f9">0</span>  Warnings: <span style="color:#bd93f9">1</span>
</span></span></code></pre></div><h2 id="参考链接">参考链接<a class="anchorjs-link" href="#%e5%8f%82%e8%80%83%e9%93%be%e6%8e%a5"></a></h2><p><a href="https://www.runoob.com/w3cnote/linux-mysql-import-export-data.html" target="_blank">https://www.runoob.com/w3cnote/linux-mysql-import-export-data.html</a></p>
<p><a href="https://juejin.cn/post/6992489420188286983" target="_blank">https://juejin.cn/post/6992489420188286983</a></p>
<p><a href="https://juejin.cn/post/7039542872051302436" target="_blank">https://juejin.cn/post/7039542872051302436</a></p>
<p><a href="https://www.modb.pro/db/98539" target="_blank">https://www.modb.pro/db/98539</a></p>


        <hr style="visibility: hidden;" />
        <ul class="pager">
          
          <li class="previous">
            <a href="/post/workspace/01-tech/linux/linux-%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/" data-toggle="tooltip" data-placement="top" title="Linux-磁盘管理">
              Previous<br>
              <span>Linux-磁盘管理</span>
            </a>
          </li>
          
          
          <li class="next">
            <a href="/post/workspace/01-tech/database/oracle-mysql%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB%E6%95%B0%E6%8D%AE%E4%BA%8B%E9%A1%B9/" data-toggle="tooltip" data-placement="top" title="oracle-&gt;mysql数据迁移数据事项">
              Next<br>
              <span>oracle-&gt;mysql数据迁移数据事项</span>
            </a>
          </li>
          
        </ul>
        <hr style="visibility: hidden;" />

        
        



<div class="giscus" id="comments"></div>
<script src="https://giscus.app/client.js" 
  data-repo="roninro/hugo-theme-puppet" 
  data-repo-id="R_kgDOHuvyhw"
  data-category="General"
  data-category-id="DIC_kwDOHuvyh84CQjDo"
  data-mapping="pathname"
  data-strict="0" 
  data-reactions-enabled="1" 
  data-emit-metadata="0" 
  data-input-position="top"
  data-theme="light_tritanopia"
  data-lang="en"
  crossorigin="anonymous"
  async>
  </script>




      </div>

      
      
      
      
      <div class="
              col-lg-8 col-lg-offset-2
              col-md-10 col-md-offset-1
              sidebar-container">

        
        
        <section>
  
  
  <hr class="hidden-sm hidden-xs">
  
  <h5>FEATURED TAGS</h5>
  <div class="tags">
    
    <a href="/tags/ai/">AI</a>
    
    <a href="/tags/benchmarksql%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/">BenchmarkSQL性能测试</a>
    
    <a href="/tags/java/">Java</a>
    
    <a href="/tags/linux/">Linux</a>
    
    <a href="/tags/maven/">Maven</a>
    
    <a href="/tags/miniapp/">MiniApp</a>
    
    <a href="/tags/music/">music</a>
    
    <a href="/tags/redis/">Redis</a>
    
    <a href="/tags/weekly-letter/">weekly-letter</a>
    
    <a href="/tags/windows/">Windows</a>
    
    <a href="/tags/%E5%85%B6%E4%BB%96/">其他</a>
    
    <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
    
    <a href="/tags/%E8%B5%84%E6%BA%90/">资源</a>
    
    <a href="/tags/%E8%BD%AF%E8%80%83-%E4%B8%AD%E7%BA%A7%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E5%B8%88/">软考-中级软件设计师</a>
    
    <a href="/tags/%E9%98%85%E8%AF%BB%E6%B8%85%E5%8D%95/">阅读清单</a>
    
  </div>
</section>

        
        

      </div>
    </div>
  </div>
</article>



  
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        
        <ul class="list-inline text-center">


<li>
  <a href="/index.xml" target="_blank">
    <span class="fa-stack fa-lg">
      <i class="fa fa-circle fa-stack-2x"></i>
      <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
    </span>
  </a>
</li></ul>

        <p class="copyright text-muted">
          Copyright &copy; 2MUCH 2023  
          <br>
          Powered by <a href="https://gohugo.io">Hugo</a>
        </p>
      </div>
    </div>
  </div>
</footer>

<script src=/js/jquery.min.js></script>
<script src=/js/bootstrap.min.js crossorigin="anonymous"></script>



<script src="/js/hux-blog.min.c4ea77041cd3edbfc8b2622cd887a9a5d8760a4162d14489e36d2a3fa4c90172.js"></script>


<script src=/js/simple-jekyll-search.min.js></script>


<script src="/js/search.min.53bce5da475b4d362500e5ce5dddfa22e20e1b9018777411d2020b4b839c9310.js"></script>













<script src="/zoomjs/zoom.min.js"></script>

</body>

</html>